library(httr)
library(jsonlite)
# pulling data from api
beaKey = "2796DD07-FDBD-4424-83E9-5D8AD49673D6"
# parse json data from url
getDatIO <- function(tableID) {
url = paste0("https://apps.bea.gov/api/data/?&UserID=", beaKey, "&method=GetData&DataSetName=InputOutput&Year=ALL&tableID=", tableID, "&ResultFormat=json")
response <- GET(url)
data <- content(response, "text")
json_data <- fromJSON(data)
return(json_data)
}
getDatGDP <- function(tableID) {
url = paste0("https://apps.bea.gov/api/data/?&UserID=", beaKey, "&method=GetData&DataSetName=GDPbyIndustry&Year=ALL&tableID=", tableID, "&Industry=ALL&Frequency=A&ResultFormat=json")
response <- GET(url)
data <- content(response, "text")
json_data <- fromJSON(data)
return(json_data)
}
getDatNIPA <- function(tableName) {
url = paste0("https://apps.bea.gov/api/data/?&UserID=", beaKey, "&method=GetData&DataSetName=NIPA&Year=ALL&TableName=", tableName, "&Frequency=A&ResultFormat=json")
response <- GET(url)
data <- content(response, "text")
json_data <- fromJSON(data)
return(json_data)
}
# list of table IDs to confirm I'm getting Make and Use for all years
IO_Table_List = GET("https://apps.bea.gov/api/data?&UserID=2796DD07-FDBD-4424-83E9-5D8AD49673D6&method=GetParameterValues&datasetname=InputOutput&ParameterName=TableID&ResultFormat=json")
IO_Table_List <- content(IO_Table_List, "text")
IO_Table_List <- fromJSON(IO_Table_List)$BEAAPI$Results$ParamValue
View(IO_Table_List)
load("/Users/jacobgosselin/Library/CloudStorage/GoogleDrive-jacob.gosselin@u.northwestern.edu/My Drive/research_ideas/het_sectoral_prod/data/raw/api_pull_BEA/make&use.RData")
View(make_data_raw)
View(use_data_raw)
220171-15297
